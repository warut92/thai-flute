<!DOCTYPE html>
<html>
<head>
  <title>แปลงโน้ตไทย</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="https://img.icons8.com/material-outlined/24/000000/sci-fi.png" type="image/x-icon"/>
<link rel="shortcut icon" href="https://img.icons8.com/material-outlined/24/000000/sci-fi.png" type="image/x-icon"/>
<!-- <a href="https://icons8.com/icon/88875/sci-fi">Sci-Fi icon by Icons8</a> -->

<!-- <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Shavian&display=swap" rel="stylesheet"> -->

  <link href="https://www.abcjs.net/abcjs-audio.css" media="all" rel="stylesheet" type="text/css" />
  <script src="https://www.abcjs.net/abcjs-basic-min.js" type="text/javascript"></script>

  <script type="text/javascript" src="./konvertigo.js"></script>

<style type="text/css">
body, p, input {
    background: peru;
    color: silver;
    font-family: 'Noto Sans Shavian', sans-serif;
}

h1 {
  /* color: goldenrod;
  text-shadow: 2px 2px #FF0000; */
  text-align: center;
}

textarea {
  font-size: 20px;

  max-width: 100%;
}
p {
  text-align: center;
}

input {
  font-size: 18px;
}

a {
  color: green;
}

.f {width:10em}
</style>
</head>
<body>

<h1>แปลงโน้ตไทย</h1>
<p>
<br>
<input class="f" onclick="sxaven('tt');" type="button" value="แปลงโน้ตไทย">
<br>
<!-- <input class="f" onclick="espen(&#39;tt&#39;);" type="button" value="แปลงโน้ต ABC"> -->
</p>

<br>


<textarea id="tt" cols="150" rows="10" placeholder="">
X: 1
T: ทดสอบ
M: C
L: 1/16
K: C
/-ซ-ม/รดรม/----/-ด-ร/-ด-ม/-รรร/---
</textarea>


<hr />
<div id="audio"></div>
<div id="warnings"></div>
<div id="paper0" class="paper"></div>
<div id="paper1" class="paper"></div>
<div id="paper2" class="paper"></div>
<div id="paper3" class="paper"></div>
<div id="selection"></div>

<script type="text/javascript">
	function selectionCallback(abcelem) {
		var note = {};
		for (var key in abcelem) {
			if (abcelem.hasOwnProperty(key) && key !== "abselem")
				note[key] = abcelem[key];
		}
		console.log(abcelem);
		var el = document.getElementById("selection");
		el.innerHTML = "<b>selectionCallback parameter:</b><br>" + JSON.stringify(note);
	}

	function initEditor() {
		new ABCJS.Editor("abc", { paper_id: "paper0",
			synth: {
				el: "#audio",
				options: { displayLoop: true, displayRestart: true, displayPlay: true, displayProgress: true, displayWarp: true }
			},
			generate_warnings: true,
			warnings_id:"warnings",
			abcjsParams: {
				generateDownload: true,
				clickListener: selectionCallback
			}
		});
	}

	window.addEventListener("load", initEditor, false);
</script>
</body>
</html>
